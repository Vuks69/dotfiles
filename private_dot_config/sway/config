# Sway config
# Reference: man 5 sway

# set {
# 	$Alt Mod1
# 	$Meta Mod4
# 	$bindsm bindsym --no-repeat
# 	$notify notify-send -t 750 --app-name ""
# 	$message notify-send -t 5000 --app-name ""
# 	$notifyAct dunstctl action
# 	$notifyClose dunstctl close
# 	$run exec --no-startup-id
# 	$bg $(find $XDG_PICTURES_DIR/bg/* | shuf -n1)
# 	$block-standby [ ! $(pidof zathura) ]
# 	$block-suspend [ ! $(pidof {python,yt-dlp,zathura}) ]
# 	$moveto "move container to workspace"
# 	#$setbg output * bg $bg fill
# 	$setbg output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
# 	#$lock swaymsg "$setbg" | swaylock --indicator-idle-visible -ei $bg
# 	$lock swaymsg "$setbg" | waylock -ignore-empty-password
# 	$wsget "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' )))"
# 	$wsnext "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) +1))"
# 	$wsprev "$(( $( swaymsg -t get_workspaces | jq '.[] | select(.focused).num' ) -1))"
# 	$getvol $notify $([ ! $(pactl get-sink-mute @DEFAULT_SINK@ | grep no) ] && \
# 		echo 'ðŸ”‡' || echo 'ðŸ”Š') -h int:value:$(pactl get-sink-volume @DEFAULT_SINK@ |\
# 			grep Volume | awk '{print $5}' | sed 's/%//')
# }

# --- Variables ---
set $mod Mod4
set $term kitty
set $rofi_cmd rofi -terminal '$term'
set $menu $rofi_cmd -show combi -combi-modes drun#run -modes combi
set $wallpaper_dir $HOME/Pictures/wallpapers

# --- Output configuration ---
set $screen_left DP-3
set $screen_midd DP-2
set $screen_righ HDMI-A-1
output $screen_left position 0,0
output $screen_midd position 1920,0 allow_tearing yes
output $screen_righ position 4480,0 transform 90
output * bg $wallpaper_dir/wallhaven-vqm813.jpg fill

# --- Workspace assignment ---
workspace 1 output $screen_left
workspace 2 output $screen_midd
workspace 3 output $screen_righ

# Get IDs or classes with swaymsg -t get_tree
assign [app_id="org.mozilla.firefox"] 1
assign [app_id="thunderbird"] 1
assign [class="Spotify"] 1
assign [class="steam"] 2
assign [class="vesktop"] 3

# --- Idle configuration ---
set $lockprog swaylock -efF
exec swayidle -w \
  timeout 300 'swaylock -efF' \
  timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
  before-sleep 'swaylock -efF'

# --- Input configuration ---
# See `swaymsg -t get_inputs` for device names
# Example:
# input "2:14:SynPS/2_Synaptics_TouchPad" {
#   dwt enabled
#   tap enabled
#   natural_scroll enabled
#   middle_emulation enabled
# }
input type:keyboard xkb_layout pl
input type:pointer accel_profile flat

# --- Key bindings ---
# Basics
bindsym $mod+Return exec $term
bindsym $mod+d exec $menu
bindsym $mod+l exec $lockprog
bindsym $mod+Shift+q kill
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
floating_modifier $mod normal

# Focus movement
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Layout
bindsym $mod+h splith
bindsym $mod+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+f fullscreen
bindsym $mod+a focus parent
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

# Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Resize mode
mode "resize" {
  bindsym Left resize shrink width 10px
  bindsym Down resize grow height 10px
  bindsym Up resize shrink height 10px
  bindsym Right resize grow width 10px
  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

# --- Include additional configs ---
include '$(/usr/libexec/sway/layered-include "/usr/share/sway/config.d/*.conf" "/etc/sway/config.d/*.conf" "${XDG_CONFIG_HOME:-$HOME/.config}/sway/config.d/*.conf")'
